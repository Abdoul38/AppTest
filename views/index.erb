<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Highlighter</title>
    <style>
    .highlight {
      background-color: green;
      cursor: pointer;
    }
    </style>
  </head>
  <body>
    <h1>What do you want to highlight?</h1>
    <form action="/" method="post">
  <div>
    <label for="text">The content :</label><br>
    <textarea name="text" id="text" rows="10" cols="70" style="text-align: justify;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas consectetur malesuada velit, sit amet porta magna maximus nec. Aliquam aliquet tincidunt enim vel rutrum. Ut augue lorem, rutrum et turpis in, molestie mollis nisi. Ut dapibus erat eget felis pulvinar, ac vestibulum augue bibendum. Quisque sagittis magna nisi. Sed aliquam porttitor fermentum. Nulla consequat justo eu nulla sollicitudin auctor. Sed porta enim non diam mollis, a ullamcorper dolor molestie. Nam eu ex non nisl viverra hendrerit. Donec ante augue, eleifend vel eleifend quis, laoreet volutpat ipsum. Integer viverra aliquam nulla, ac rutrum dui sodales nec.</textarea>
  </div>
  <div>
    <label for="highlights">The highlights :</label><br>
    <textarea name="highlights" id="highlights" rows="10" cols="70">[{ start: 20, end: 35, comment: "Foo" },{ start: 73, end: 92, comment: "Bar" },{ start: 50, end: 98, comment: "Baz" }]</textarea>
  </div>
  <button type="submit">Convertir</button>
  
</form>

<div class="result" rows="10" cols="70">
  <%= @highlighted_text %>
</div>
<script>
var highlightedElements = document.querySelectorAll('.highlight');
highlightedElements.forEach(function(element) {
  element.addEventListener('mouseover', function() {
    var tooltip = this.getAttribute('data');
    var tooltipElement = document.createElement('div');
    tooltipElement.classList.add('tooltip');
    tooltipElement.innerHTML = tooltip;
    document.body.appendChild(tooltipElement);
    
    var rect = this.getBoundingClientRect();
    var tooltipRect = tooltipElement.getBoundingClientRect();
    tooltipElement.style.top = rect.top - tooltipRect.height + 'px';
    tooltipElement.style.left = rect.left + (rect.width - tooltipRect.width) / 2 + 'px';
  });
  
  element.addEventListener('mouseout', function() {
    var tooltip = document.querySelector('.tooltip');
    if (tooltip) {
      tooltip.remove();
    }
  });
});
</script>

<style>
.result{
border: 1px solid black;
padding: 10px;
width:500px;
height: 600px;
margin-left: 600px;
margin-top: -350px;
}

h1{
margin-left: 300px;
}

.highlight {
  background-color: #9bd8ee;
  
}

.tooltip {
  position: absolute;
  background-color: #333;
  color: #fff;
  padding: 10px;
  border-radius: 1px;
}
</style>

</body>
</html>
